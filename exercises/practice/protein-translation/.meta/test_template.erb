require 'minitest/autorun'
require_relative 'protein_translation'

class ProteinTranslationTest < Minitest::Test
<% json["cases"].each do |cases| %>
    def test_<%= underscore(cases["description"]) %>
        <%= skip? %>
        strand = '<%= cases["input"]["strand"] %>'
        <%- if cases["expected"].is_a?(Hash) && cases["expected"].key?("error") -%>
        assert_raises(InvalidCodonError) do
            Translation.of_rna(strand)
        end
        <%- else -%>
            actual = Translation.of_rna(strand)
            expected = %w[<%= cases["expected"].join(" ") %>]
            assert_equal expected, actual
        <%- end -%>
    end
<% end %>
end
