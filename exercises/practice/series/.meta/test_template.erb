require 'minitest/autorun'
require_relative 'series'

class SeriesTest < Minitest::Test
<% json["cases"].each do |cases| %>
    def test_<%= underscore(cases["description"]) %>
        <%= skip? %>
        <%- if cases["expected"].is_a?(Hash) && cases["expected"].key?("error") -%>
            slice_string ='<%= cases["input"]["series"] %>'
            <%- if cases["expected"]["error"] == "series cannot be empty"-%>
                assert_raises ArgumentError do
                    Series.new(slice_string)
                end
            <%- else -%>
                series = Series.new(slice_string)
                assert_raises ArgumentError do
                    series.slices(<%= cases["input"]["sliceLength"] %>)
                end
            <%- end -%>
        <%- else -%>
            actual = Series.new('<%= cases["input"]["series"]%>').slices(<%= cases["input"]["sliceLength"] %>)
            expected = <%= cases["expected"] %>
            assert_equal expected, actual
        <%- end -%>
    end
    <% end %>
end
